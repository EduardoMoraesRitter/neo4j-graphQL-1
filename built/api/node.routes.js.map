{"version":3,"sources":["../../src/api/node.routes.js"],"names":[],"mappings":"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","file":"node.routes.js","sourcesContent":["module.exports = function(config,router){\r\n    \r\n    \"use strict\";\r\n\r\n   \r\n    var node = require('./node')(config);\r\n\r\n\r\n    router.route('/node/get/:id').get(function(req,res){\r\n        node.get(req.params.id)\r\n            .then(function (data) {\r\n                if (!data){\r\n                    res.sendStatus(204);\r\n                }\r\n                else{\r\n                    res.status(200).json(data);\r\n                }\r\n            })\r\n            .catch(function (err) {\r\n                res.status(500).json(err);\r\n            });\r\n        });\r\n        \r\n        \r\n   router.route('/node/getWithRels/:id').get(function(req,res){\r\n         node.getWithRels(req.params.id)\r\n             .then(function (data) {\r\n                    //return 204 if null \r\n                if (!data){\r\n                    res.sendStatus(204);\r\n                }\r\n                else{\r\n                    res.status(200).json(data);\r\n                }\r\n            \r\n             })\r\n             .catch(function (err) {\r\n                res.status(500).json(err);\r\n             });\r\n    });\r\n\r\n\r\n   \r\n    \r\n     router.route('/node/schema/:id').get(function(req,res){\r\n        node.getSchema(req.params.id)\r\n            .then(function (data) {\r\n                if (!data){\r\n                    res.sendStatus(204);\r\n                }\r\n                else{\r\n                    res.status(200).json(data);\r\n                }\r\n            })\r\n            .catch(function (err) {\r\n                res.status(500).json(err);\r\n            });\r\n        });\r\n        \r\n\r\n  \r\n    \r\n\r\n    router.route('/node/save').post(function(req,res){\r\n          node.save(req.body.node,req.body.user)\r\n            .then(function (data) {\r\n                res.status(201).json(data);\r\n             })\r\n             .catch(function (err) {\r\n                res.status(500).json(err);\r\n             });\r\n    });\r\n    \r\n    //use for saveWikipagename\r\n    //WILL NEED TO BE REIMPLEMENTED TO UPDATE RELATED WIKIPEDIA NODE\r\n    /*\r\n    \r\n      router.route('/node/save/:prop').post(function(req,res){\r\n          node.metadata.saveProp(req.params.prop,req.body)\r\n            .then(function (data) {\r\n                res.status(200).json(data);\r\n             })\r\n             .catch(function (err) {\r\n                res.status(500).json(err);\r\n             });\r\n    });\r\n*/\r\n\r\n    router.route('/node/delete').post(function(req,res){\r\n           node.delete(req.body.node)\r\n            .then(function (data) {\r\n                res.status(200).json(data);\r\n             })\r\n             .catch(function (err) {\r\n                res.status(500).json(err);\r\n             });\r\n    });\r\n    \r\n    router.route('/node/destroy').post(function(req,res){\r\n           node.destroy(req.body.node)\r\n            .then(function (data) {\r\n                res.status(200).json(data);\r\n             })\r\n             .catch(function (err) {\r\n                res.status(500).json(err);\r\n             });\r\n    });\r\n    \r\n    router.route('/node/restore').post(function(req,res){\r\n           node.restore(req.body.node)\r\n            .then(function (data) {\r\n                res.status(200).json(data);\r\n             })\r\n             .catch(function (err) {\r\n                res.status(500).json(err);\r\n             });\r\n    });\r\n   \r\n   \r\n    router.route('/node/list/labelled/:id').get(function (req, res) {\r\n\r\n        node.list.labelled(req.params.id)\r\n          .then(function(data){\r\n               res.status(200).json(data);\r\n            })\r\n          .catch(function (err) {\r\n               res.status(500).json({error:err});\r\n           });\r\n    });\r\n\r\n    return router;\r\n\r\n};\r\n"]}