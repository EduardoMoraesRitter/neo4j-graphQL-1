{"version":3,"sources":["../../src/api/picture.routes.js"],"names":[],"mappings":";;AAAA,OAAO,OAAP,GAAiB,UAAS,MAAT,EAAgB,MAAhB,EAAuB;;AAEpC,iBAFoC;;AAKpC,QAAI,UAAU,QAAQ,WAAR,EAAqB,MAArB,CAAV,CALgC;;AAOtC,QAAI,QAAQ,QAAQ,SAAR,EAAmB,MAAnB,CAAR,CAPkC;;AASrC,WAAO,KAAP,CAAa,kBAAb,EAAiC,GAAjC,CAAqC,UAAS,GAAT,EAAa,GAAb,EAAiB;AACjD,gBAAQ,GAAR,CAAY,IAAI,MAAJ,CAAW,EAAX,CAAZ,CACK,IADL,CACU,UAAU,IAAV,EAAgB;;;;;AAKd,gBAAI,MAAJ,CAAW,GAAX,EAAgB,IAAhB,CAAqB,IAArB;;AALc,SAAhB,CADV,CASK,KATL,CASW,UAAU,GAAV,EAAe;AAClB,gBAAI,MAAJ,CAAW,GAAX,EAAgB,IAAhB,CAAqB,GAArB,EADkB;SAAf,CATX,CADiD;KAAjB,CAArC,CATqC;;AAwBtC,WAAO,KAAP,CAAa,0BAAb,EAAyC,GAAzC,CAA6C,UAAS,GAAT,EAAa,GAAb,EAAiB;AACxD,gBAAQ,WAAR,CAAoB,IAAI,MAAJ,CAAW,EAAX,CAApB,CACK,IADL,CACU,UAAU,IAAV,EAAgB;AAClB,gBAAI,CAAC,IAAD,EAAM;AACN,oBAAI,UAAJ,CAAe,GAAf,EADM;aAAV,MAGI;AACA,oBAAI,MAAJ,CAAW,GAAX,EAAgB,IAAhB,CAAqB,IAArB,EADA;aAHJ;SADE,CADV,CASK,KATL,CASW,UAAU,GAAV,EAAe;AAClB,gBAAI,MAAJ,CAAW,GAAX,EAAgB,IAAhB,CAAqB,GAArB,EADkB;SAAf,CATX,CADwD;KAAjB,CAA7C;;;;;;AAxBsC,UA4CrC,CAAO,KAAP,CAAa,4BAAb,EAA2C,GAA3C,CAA+C,UAAS,GAAT,EAAa,GAAb,EAAiB;;AAE1D,gBAAQ,IAAR,CAAa,QAAb,CAAsB,IAAI,MAAJ,EAAW,IAAI,KAAJ,CAAjC,CACI,IADJ,CACS,UAAU,IAAV,EAAgB;AAClB,gBAAI,CAAC,IAAD,EAAM;AACN,oBAAI,UAAJ,CAAe,GAAf,EADM;aAAV,MAGI;AACA,oBAAI,MAAJ,CAAW,GAAX,EAAgB,IAAhB,CAAqB,IAArB,EADA;aAHJ;SADE,CADT,CASI,KATJ,CASU,UAAU,GAAV,EAAe;AAClB,gBAAI,MAAJ,CAAW,GAAX,EAAgB,IAAhB,CAAqB,GAArB,EADkB;SAAf,CATV,CAF0D;KAAjB,CAA/C,CA5CqC;;AA8DrC,WAAO,KAAP,CAAa,+BAAb,EAA8C,GAA9C,CAAkD,UAAS,GAAT,EAAa,GAAb,EAAiB;AAC7D,gBAAQ,IAAR,CAAa,QAAb,CAAsB,IAAI,MAAJ,EAAW,IAAI,KAAJ,CAAjC,CACI,IADJ,CACS,UAAU,IAAV,EAAgB;AAClB,gBAAI,CAAC,IAAD,EAAM;AACN,oBAAI,UAAJ,CAAe,GAAf,EADM;aAAV,MAGI;AACA,oBAAI,MAAJ,CAAW,GAAX,EAAgB,IAAhB,CAAqB,IAArB,EADA;aAHJ;SADE,CADT,CASI,KATJ,CASU,UAAU,GAAV,EAAe;AAClB,gBAAI,MAAJ,CAAW,GAAX,EAAgB,IAAhB,CAAqB,GAArB,EADkB;SAAf,CATV,CAD6D;KAAjB,CAAlD,CA9DqC;;AA6ErC,WAAO,KAAP,CAAa,0BAAb,EAAyC,GAAzC,CAA6C,UAAS,GAAT,EAAa,GAAb,EAAiB;AACxD,gBAAQ,IAAR,CAAa,SAAb,CAAuB,IAAI,MAAJ,EAAW,IAAI,KAAJ,CAAlC,CACI,IADJ,CACS,UAAU,IAAV,EAAgB;AAClB,gBAAI,CAAC,IAAD,EAAM;AACN,oBAAI,UAAJ,CAAe,GAAf,EADM;aAAV,MAGI;AACA,oBAAI,MAAJ,CAAW,GAAX,EAAgB,IAAhB,CAAqB,IAArB,EADA;aAHJ;SADE,CADT,CASI,KATJ,CASU,UAAU,GAAV,EAAe;AAClB,gBAAI,MAAJ,CAAW,GAAX,EAAgB,IAAhB,CAAqB,GAArB,EADkB;SAAf,CATV,CADwD;KAAjB,CAA7C,CA7EqC;;AA6FrC,WAAO,KAAP,CAAa,WAAb,EAA0B,IAA1B,CAA+B,UAAS,GAAT,EAAa,GAAb,EAAiB;AAC1C,gBAAQ,IAAR,CAAa,QAAb,CAAsB,IAAI,IAAJ,EAAS,IAAI,KAAJ,CAA/B,CACI,IADJ,CACS,UAAU,IAAV,EAAgB;AAClB,gBAAI,CAAC,IAAD,EAAM;AACN,oBAAI,UAAJ,CAAe,GAAf,EADM;aAAV,MAGI;AACA,oBAAI,MAAJ,CAAW,GAAX,EAAgB,IAAhB,CAAqB,IAArB,EADA;aAHJ;SADE,CADT,CASI,KATJ,CASU,UAAU,GAAV,EAAe;AAClB,gBAAI,MAAJ,CAAW,GAAX,EAAgB,IAAhB,CAAqB,GAArB,EADkB;SAAf,CATV,CAD0C;KAAjB,CAA/B;;;;AA7FqC,UA8GnC,CAAO,KAAP,CAAa,cAAb,EAA6B,IAA7B,CAAkC,UAAS,GAAT,EAAa,GAAb,EAAiB;AAC/C,cAAM,KAAN,CAAY,IAAI,IAAJ,CAAZ,CACI,IADJ,CACS,UAAU,IAAV,EAAgB;AAClB,gBAAI,CAAC,IAAD,EAAM;AACN,oBAAI,UAAJ,CAAe,GAAf,EADM;aAAV,MAGI;AACA,oBAAI,MAAJ,CAAW,GAAX,EAAgB,IAAhB,CAAqB,IAArB,EADA;aAHJ;SADE,CADT,CASI,KATJ,CASU,UAAU,GAAV,EAAe;AAClB,gBAAI,MAAJ,CAAW,GAAX,EAAgB,IAAhB,CAAqB,GAArB,EADkB;SAAf,CATV,CAD+C;KAAjB,CAAlC,CA9GmC;;AA8HpC,WAAO,MAAP,CA9HoC;CAAvB","file":"picture.routes.js","sourcesContent":["module.exports = function(config,router){\r\n    \r\n    \"use strict\";\r\n\r\n \r\n    var picture = require('./picture')(config);\r\n\r\n  var image = require('./image')(config);\r\n  \r\n   router.route('/picture/get/:id').get(function(req,res){\r\n        picture.get(req.params.id)\r\n            .then(function (data) {\r\n               // if (!data){\r\n               //     res.sendStatus(204);\r\n              //  }\r\n              //  else{\r\n                    res.status(200).json(data);\r\n              //  }\r\n            })\r\n            .catch(function (err) {\r\n                res.status(500).json(err);\r\n            });\r\n        });\r\n        \r\n  router.route('/picture/getWithRels/:id').get(function(req,res){\r\n        picture.getWithRels(req.params.id)\r\n            .then(function (data) {\r\n                if (!data){\r\n                    res.sendStatus(204);\r\n                }\r\n                else{\r\n                    res.status(200).json(data);\r\n                }\r\n            })\r\n            .catch(function (err) {\r\n                res.status(500).json(err);\r\n            });\r\n        });\r\n     \r\n   //for more complex queries combining property, label and predicate searches \r\n   //post a json object like\r\n   //{site:\"artsy\",labels:[Delacroix,Drawing],props:{props:[Title],val:\"sketchbook\"},predicate:{predicate:\"BY\",target:\"Delacroix\"}}\r\n   \r\n \r\n   router.route('/pictures/labelled/:labels').get(function(req,res){\r\n       \r\n         picture.list.labelled(req.params,req.query)\r\n            .then(function (data) {\r\n                if (!data){\r\n                    res.sendStatus(204);\r\n                }\r\n                else{\r\n                    res.status(200).json(data);\r\n                }\r\n            })\r\n            .catch(function (err) {\r\n                res.status(500).json(err);\r\n            });\r\n            \r\n   });\r\n\r\n\r\n   router.route('/pictures/property/:prop/:val').get(function(req,res){\r\n         picture.list.property(req.params,req.query)\r\n            .then(function (data) {\r\n                if (!data){\r\n                    res.sendStatus(204);\r\n                }\r\n                else{\r\n                    res.status(200).json(data);\r\n                }\r\n            })\r\n            .catch(function (err) {\r\n                res.status(500).json(err);\r\n            });\r\n        });\r\n\r\n   router.route('/pictures/:predicate/:id').get(function(req,res){\r\n         picture.list.predicate(req.params,req.query)\r\n            .then(function (data) {\r\n                if (!data){\r\n                    res.sendStatus(204);\r\n                }\r\n                else{\r\n                    res.status(200).json(data);\r\n                }\r\n            })\r\n            .catch(function (err) {\r\n                res.status(500).json(err);\r\n            });\r\n        });\r\n\r\n\r\n   router.route('/pictures').post(function(req,res){\r\n         picture.list.combined(req.body,req.query)\r\n            .then(function (data) {\r\n                if (!data){\r\n                    res.sendStatus(204);\r\n                }\r\n                else{\r\n                    res.status(200).json(data);\r\n                }\r\n            })\r\n            .catch(function (err) {\r\n                res.status(500).json(err);\r\n            });\r\n        });\r\n        \r\n      //NB At the moment my ajax post is sending data in the query\r\n      //Should be changed to request body\r\n     router.route('/image/error').post(function(req,res){\r\n         image.error(req.body)\r\n            .then(function (data) {\r\n                if (!data){\r\n                    res.sendStatus(204);\r\n                }\r\n                else{\r\n                    res.status(200).json(data);\r\n                }\r\n            })\r\n            .catch(function (err) {\r\n                res.status(500).json(err);\r\n            });\r\n        });\r\n        \r\n        \r\n    return router;\r\n\r\n};\r\n"]}